# vue 基本使用

time: 2019.3.18

背景：最近刚入手vue做了一个大功能，在这里总结一下 vue 相关的知识，弥补一下自己在 vue 及相关技术这块的技术空缺

目录

[1. vue 基本规范](#1-vue-基本规范)

## 总结目的

1. 知识碎片总结
2. 知识形成整体化

## 1 vue 基本规范

在项目中使用到了项目开发规范，包括组件命名、组件参数配置顺序等，这里总结一下 vue 的使用规范，也就是 vue 官网的规范

## 2 computed vs watch

2者不同的使用场景

1. 内部响应式数据需要使用到 props 数据：使用 `watch` 监听 props 数据，动态更新 data 内部属性值
2. 复杂计算构成的普通数据：使用 `computed`，当一个状态需要由其他数据决定的时候，包括 props 数据、响应式数据、普通数据，但是 computed 数据本身只能作为普通数据，不能用于响应式数据

计算属性 computed 特点：`数据缓存`，当依赖数据变化时才会去更新缓存

## 3 vue 的显著特点

自身特点，同 react 使用对比，从指令、slot、生命周期、数据驱动、等方向来看

1. 通过 props 传入的数据: 不能直接用于组件的响应式数据，因为 props 是单向数据流
2. 响应式数据: 只能是定义在 data 对象内部的数据
3. 监听 props: 内部需要使用到 props 数据，并且用于响应式数据组成，则可以监听 props 数据更新，为 data 中的响应式数据赋值
4. data 内部不要使用方法：方法应该定义在 methods 对象中，data 中应该只定义响应式数据或普通数据

## 4 vue 的其他知识点

## 5 项目经验总结

### 5.1 父子组件信息交互

通常实现一个功能模块，需要将该功能模块拆分成多个模块，模块之间信息通过 `props` 传递数据与方法

1. `index.vue`：入口文件，作为其他组件的父组件，包含通用状态
2. 多层嵌套、多子组件实例，建议使用状态管理

### 5.2 标单可编辑状态数据回滚

表单数据更新，应当允许数据回滚，比如数据用户编辑出错，选择取消编辑，则数据应当回滚

数据设计方式：`originalInfo`, `currentInfo`

originalInfo: 保存原有数据，当数据出错时，将 currentInfo 部分数据恢复为 originalInfo 的数据

currentInfo：当前表单双向数据邦定数据，由 originalInfo 而来，当 originalInfo 更新时同步更新

### 5.3 使用 v-if 阻止组件渲染与发起 http 请求

如果在父组件中同时存在多个相同子组件实例，如果默认子组件渲染的话，可能会同时由子组件发起重复的 http 请求获取初始化数据，此刻可以使用 v-if 阻止子组件渲染，减少同时发起的 http 请求

思考：

1. 如果项目中用到的 vuex 状态管理，就可以多个子组件共享一套数据，而不用重复去发起数据请求了
2. 如果使用动态加载技术，也可以实现在需要的时候再去加载这个组件，但是组件属于内部组件，而不是模块组件的话，则

## 参考文章

[1 vue 风格指南](https://cn.vuejs.org/v2/style-guide/)