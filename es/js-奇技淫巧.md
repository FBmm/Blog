# js 奇迹淫巧

## 1 js浮点数计算

time: 2018.12.01

`0.1 + 0.2 = 0.30000000000000004`

首先看计算机如何存储数：计算机是以二进制存储数据，在10进制编码之后，运算也会转为2进制进行运算，那么我们写的十进制是如何转二进制的呢？  

1. 整数 `除二取余` : `13` 对应的二进制数为 `1101`
2. 小数 `乘二取整` : `0.1` 对应的二进制数为 `0.000110011001100`无限循环，在某个精度点就舍弃

> 问：为什么整数就是 `除二取余` 呢？  
> 答：同十进制，`123` 表示 `除十取余` ， `3*10^0 + 2*10^1 + 1*10^2` 。一个道理，8进制就是 `除八取余`  
> 问：为什么小数就是 `乘二取整` 呢？  
> 答：同十进制，`0.123` 表示 `乘十取整` ，小数部分 `3*10^0 + 2*10^1 + 1*10^2` 。一个道理，8进制就是 `乘八取整`  
> 问：那二进制如何转十进制呢？  
> 答：同其他进制，二进制 `0.00011` 表示成十进制过程

二进制、八进制、十进制之间如何转换？

## 2 退出循环

1. for 语句： `break;`
2. forEach 一类： `return false;` 或者 `throw new Error('error')`

> 问：为什么 forEach 不能使用 break 跳出循环？  
> 答：设计的目的就不是用于跳出循环，它是用于遍历所有的项，如果想跳出，最好使用 for 循环。  
> 问：使用 `return ;` 在 forEach 循环中，属于跳出循环吗?  
> 答：不属于。每轮循环还是会走，只是说走到满足条件执行 `return ;` 时，回调函数返回空，然后还是会继续循环下去。
