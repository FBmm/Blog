# nginx 配置

time: 2019.4.15
author: heyunjiang

## 1 作用

nginx 通常用于做反向代理服务器，那么什么是反向代理？什么又是正向代理？反向代理有什么好处？

### 1.1 反向代理

通用用户是直接向服务器发起请求，现在有个问题，如果增加了多个服务器，怎么做合理资源分配，或者我想隐藏真实服务器信息呢？

问：什么是反向代理？  
答：在真实服务器之前搭建一层拦截服务器，对外这个 nginx 拦截服务器就是真实服务器，对内，nginx 只是做反向代理及其他过程。这个是服务器方主动部署，用于实现保护服务器、实现负载均衡等目的

问：什么是正向代理？  
答：通常我们要访问 google 等一些不可直接访问的资源，需要本地起一个 shadowsockets 类似的代理服务器，代理到香港或其他地方的服务器，来间接访问 google 来达到我们的目的

### 1.2 反向代理有什么好处

1. 隐藏真实服务器地址，保护服务器
2. 节约 ip 资源，在 nginx 内部做多台虚拟主机，每台主机对应一个私有地址
3. 负载均衡，减少服务器压力，提高相应速度
4. 请求统一控制，比如 登录、api 等，统一由 nginx 控制，不管对应其他什么环境，前端是模糊的，统一 nginx 转发，后端处理

## 2 nginx 配置问题

1. 单一 server 下的 server_name 配置无效

## 参考文章

[Nginx请求反向代理](https://www.jianshu.com/p/bed000e1830b)

