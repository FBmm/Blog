# antd源码解读

阅读版本：antd 3+

time: 2018.8.06

为什么要阅读源码？要解决些什么问题？自己想要一些什么收获？怎么阅读

目录

1. 为什么要阅读源码？
2. 要解决些什么问题？
3. 怎么阅读？
4. 归纳总结

## 1 为什么要阅读源码？

想要深入了解这个产品，因为它在我日常项目中用到非常多，github 上已经超过 3w star，深入学习了解它对我个人的帮助是很大的

## 2 要解决些什么问题？

1. antd 是如何设计的？它的设计价值观、设计原则及设计模式是怎样的？
2. 它是如何组织自己的开源项目的？有什么值得学习借鉴并改进的地方？我要做怎么做？
3. 学习它的组件化开发思想，html, css, js, react 配合使用技巧总结

## 3 怎么阅读？

入口：[官网](https://ant.design)

搭配：[github/ant-design](https://github.com/ant-design/ant-design/)

总结：该文档

应用：[hyj-base](https://github.com/hyj-young/hyj-base)

## 4 归纳总结

### 4.1 设计价值观

> antd 基于 `确定` 和 `自然` 的设计价值观，通过模块化的解决方案，降低冗余的生产成本，让设计者专注于更好的用户体验

问：设计价值观有哪些？分别代表什么含义

**设计价值观**：用于判断设计好坏的内在标准。这个标准又是什么？按照有效设计实践遵循规则，提供具体设计问题的向导和一般解决方案

#### 4.1.1 自然

视觉系统为主：通过提炼自然界的客观规律，并运用到界面设计中，创建更有层次的产品体验

后期加入听觉系统、触觉系统等，创建多维、更真实的产品体验

行为执行：辅助用户有效决策、减少用户的额外操作，节省用户脑力和体力，让人机交互更为自然

#### 4.1.2 确定

优秀的产品研发状态：高确定性、低熵值

1. 保持克制：聚焦在最有价值的产品功能打磨，并用尽可能少的设计元素将其表达，有的能做但是选择不做。完美不在于无以附加，而在于无可删减。
2. 面向对象：抽象对象，增强界面设计的灵活性和可维护性，减少设计者的主观干扰，降低系统的不确定性，就是降低熵值。
3. 模块化设计：通用模块抽象，提供有限接口与其他模块互动，最终减少系统的复杂度，进而增强可靠性及可维护性

问题：这里存在一个过度封装，比如我想用其中一个组件，组件能满足我大部分的需求使用，但是有一小点，我要对其做一点个性化的设计，而antd又没有提供对应的接口，那么我就可能需要做些强制性样式或功能修改，很可能去动源码

### 4.2 组件

阅读完官网的所有信息，包含设计语言、组件，组件下的快速上手、cli脚手架、主题、国际化等，开始了我的组件源码阅读，转战github

clone ant-design ，npm install, npm start，运行的效果跟官网的一样，就可以调试以及查看组件源码

antd源码阅读注意事项

1. 网页是由 `md` 文件构建
2. 组件是用 `ts` 构建

#### 4.2.1 组件导出

```javascript
import Button from './button';
import ButtonGroup from './button-group';

export { ButtonProps, ButtonShape, ButtonSize, ButtonType } from './button';
export { ButtonGroupProps } from './button-group';

Button.Group = ButtonGroup;
export default Button;
```

同时支持 export 及 export default

#### 4.2.2

### 4.3 技巧总结

#### 4.3.1 判断是否是特殊汉字

判断标准：不在常用汉字列表中，需要用2个汉字所占用的字节数(4 byte)来表示

```javascript
const rxTwoCNChar = /^[\u4e00-\u9fa5]{2}$/;
const isTwoCNChar = rxTwoCNChar.test.bind(rxTwoCNChar);
```

## 5 开源项目
